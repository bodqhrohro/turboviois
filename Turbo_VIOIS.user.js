// ==UserScript==
// @name           Turbo VIOIS
// @author          bodqhrohro
// @description  Мелкие улучшения в пользовательском интерфейсе сайта viois.ru
// @version        0.7.0 alpha
// @include        http://*viois.ru/*
// ==/UserScript==

(function(){var f=this.unsafeWindow;(function(){var H=document.createElement("script");var G=("t"+Math.random()+ +(new Date())).replace(/\./g,"");H.text="window."+G+"=true";document.querySelector("body").appendChild(H);if(typeof(f)=="undefined"||!f[G]){if(window[G]){f=window}else{var F=document.createElement("script");F.text="("+(function(){var I=document.createElement("unsafeWindow");I.style.display="none";I.onclick=function(){return window};document.body.appendChild(I)}).toString()+")()";document.querySelector("body").appendChild(F);this.unsafeWindow=document.querySelector("unsafeWindow").onclick();f=window.unsafeWindow}}})();var A;function w(){var N=f.document.createElement("div");N.style.display="block";N.setAttribute("id","nmp2");var M=f.document.createElement("div");M.setAttribute("class","wcvdgCSS-bg");M.style.opacity=0.7;M.style.animation="appear1 1s";M.style.width="100%";M.style.height="150%";var L=f.document.createElement("div");L.setAttribute("class","wcvdgCSS");L.setAttribute("tabindex","0");L.style.left="396px";L.style.top="20%";L.style.animation="appear2 1s";L.setAttribute("role","dialog");L.setAttribute("arialabelledby",":0");var J=f.document.createElement("div");J.setAttribute("class","wcvdgCSS-title");J.setAttribute("id",":0");var I=f.document.createElement("span");I.setAttribute("class","wcvdgCSS-title-text");I.innerText="Настройки Turbo VIOIS";var H=f.document.createElement("span");H.setAttribute("class","wcvdgCSS-title-close");H.onclick=function(){f.document.body.removeChild(f.document.getElementById("nmp2"))};var G=f.document.createElement("img");G.setAttribute("src","/styles/images/archive_event.gif");G.style.display="inline";G.style.width="16px";G.style.height="16px";G.setAttribute("title","Закрыть");var F=f.document.createElement("div");F.setAttribute("class","wcvdgCSS-content");var K=v(F,"Увеличивать аватарки при наведении курсора");K.addEventListener("click",function(){t("tv_thread_avatar")},true);D(K,"tv_thread_avatar",false);var K=v(F,"Редактор BB-кодов");K.addEventListener("click",function(){t("tv_bb_editor")},true);D(K,"tv_bb_editor",false);var K=v(F,"Не отображать стили VIP-статуса");K.addEventListener("click",function(){t("tv_hide_vip_style")},true);D(K,"tv_hide_vip_style",false);var K=v(F,"Аватарки слева");K.addEventListener("click",function(){t("tv_avatars_to_left")},true);D(K,"tv_avatars_to_left",false);var K=v(F,"Восстанавливать HTML в профилях (не рекомендуется)");K.addEventListener("click",function(){t("tv_repair_profile_html")},true);D(K,"tv_repair_profile_html",false);var K=v(F,"Цитировать выделенный на странице текст");K.addEventListener("click",function(){t("tv_quote_body")},true);D(K,"tv_quote_body",false);var K=v(F,"Отображать контакты на панели");K.addEventListener("click",function(){t("tv_contact_list")},true);D(K,"tv_contact_list",false);var K=r(F,"Восстановить все скрытые блоки");K.addEventListener("click",function(){var O={};localStorage.setItem("tv_hide_panels",JSON.stringify(O))},true);H.appendChild(G);J.appendChild(I);J.appendChild(H);L.appendChild(J);L.appendChild(F);N.appendChild(M);N.appendChild(L);f.document.body.appendChild(N)}function v(F,H){if(!F){return null}var G=f.document.createElement("input");G.setAttribute("type","checkbox");F.appendChild(G);F.appendChild(f.document.createTextNode(H));F.appendChild(f.document.createElement("br"));return G}function r(F,H){if(!F){return null}var G=f.document.createElement("input");G.setAttribute("type","button");G.setAttribute("value",H);F.appendChild(G);return G}function t(G){var F=B(G);F=!F;localStorage.setItem(G,F?"true":"false");return F}function B(F){return localStorage.getItem(F)=="true"}function D(I,G,H){var F=B(G);F=(F&&!H)||(!F&&H);if(I){I.checked=F}return F}function u(H){var F=f.document.getElementsByTagName("head")[0];if(!F){return}var G=f.document.createElement("style");G.type="text/css";var I=f.document.createTextNode(H);G.appendChild(I);F.appendChild(G)}function E(I,J){if(!I||!J){return}var G=0;if(I.selectionStart||I.selectionStart=="0"){G=I.selectionStart;var F=I.selectionEnd;I.value=I.value.substring(0,G)+J+I.value.substring(F,I.value.length)}else{I.value+=J}var H=G+J.length;I.setSelectionRange(H,F);I.focus()}function l(L,K,J){if(!L||!K||!J){return}var G=0,H="";var I=f.getSelection();if(I){I=I.toString()}if(L.selectionStart||L.selectionStart=="0"){G=L.selectionStart;var F=L.selectionEnd}else{G=F=L.value.length}if((G==F)&&I&&(K=="[quote]")&&(B("tv_quote_body"))){H=I}else{H=L.value.substring(G,F)}L.value=L.value.substring(0,G)+K+H+J+L.value.substring(F,L.value.length);G+=K.length;F+=K.length;L.setSelectionRange(G,F);L.focus()}function k(K){if(!K){return}var H=0;if(K.selectionStart||K.selectionStart=="0"){H=K.selectionStart;var G=K.selectionEnd;var J=K.value.substring(H,G),F="";for(var I=0;I<J.length;I++){F+="̶"+J.charAt(I)}F+="̵";K.value=K.value.substring(0,H)+F+K.value.substring(G,K.value.length);G=H+F.length;K.setSelectionRange(H,G);K.focus()}}function m(F,H){var G=F.value;for(smile in H){G=G.replace(H[smile],"[img]http://www.freesmileys.org/smileys/smiley-basic/"+smile+".gif[/img]")}F.value=G;F.focus()}function q(H){var G=f.document.getElementById("dspfld");G.style.display="block";var F=H;F=F.replace(/\n/,"<br>");F=F.replace(/\[b\]/,"<b>");F=F.replace(/\[[/]b\]/,"</b>");F=F.replace(/\[i\]/,"<i>");F=F.replace(/\[[/]i\]/,"</i>");F=F.replace(/\[u\]/,"<u>");F=F.replace(/\[[/]u\]/,"</u>");F=F.replace(/\[url=(.*?)\]/,'<a href="$1">');F=F.replace(/\[[/]url\]/,"</a>");F=F.replace(/\[quote\]/,'<div style="width:98%;background:#F6F9F9;padding:5px;margin-top:5px;margin-bottom:5px;"><b>Цитата:</b><br>');F=F.replace(/\[[/]quote\]/,"</div>");F=F.replace(/\[youtube\].+?vi?=(.{11}).*?\[[/]youtube\]/,'<iframe src="http://www.youtube.com/embed/$1" allowfullscreen="" frameborder="0" height="315" width="420"></iframe>');F=F.replace(/\[img\](.*?)\[[/]img\]/,'<img src="$1" alt="" style="max-width:300px; !important;display:block;">');G.innerHTML=F;fld.focus()}function z(H,G){var O={angel:/[0o]:-?\)/gi,biggrin:/:-?}/g,blink:/(8-?[\|\)])|(o_o)|(о_о)/gi,cool:/B-?\)/g,dry:/\|-?[\\/]/g,laugh:/:-?D/g,mad:/:-?\|\|/g,ohmy:/(omg)|(:-?o)/gi,sad:/:-?\(+/g,smile:/:-?\)+/g,tongue:/:-?P/gi,unsure:/:-[\\/]/g,wink:/;-?\)/g,cry:/:'-?\(/g,lol:/lo+l!*/gi,rant:/:-?@/g,tears:/;-?\(/g,shy:/:-?s/gi,what:/wtf\?*/gi};u("a:hover .bbtn { background-color:#ebeff9;}");u("img.bbtn { display:inline; margin: 0 2px; }");var J=H;if(G==1){J=J.getElementsByTagName("tbody")[0];J=J.getElementsByTagName("tr")[0];J=J.getElementsByTagName("td")[0]}else{J=J.parentNode}A=J.getElementsByTagName("textarea")[0];if(G<2){J=J.getElementsByTagName("div")[0];J.onmousedown="";J.innerHTML=""}else{tmpnl=f.document.createElement("div");J.appendChild(tmpnl);J=tmpnl}var W=f.document.createElement("a");W.setAttribute("class","bbtn");W.innerHTML="<img id='bbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAX0lEQVQ4y2P8//8/AzUBEwOVwaiBg9BAhv///2PFDAwMZxgYGP7jwGcYGBjSsOknxsByNDe4IBmshK6PEi/fY2BgeE8tL8NdTg0vCyLJdVDDy++xepVWXmYcLW1GgIEAm1vA6E+CY9UAAAAASUVORK5CYII=' title='Жирный' class='bbtn'>";var X=f.document.createElement("a");X.setAttribute("class","bbtn");X.innerHTML="<img id='ibtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAj0lEQVQ4y+3UsQkCYQzF8d8nVm4g6AIu4CQOYO8SbuAo198CgpWVCwiWFoKVGJvPTswVVwjeg3Qv/+QRSIkIfWqkZw3AHwSOu5hKKec6fIIn7hEx+2iOiLTq4A0C2299GeitOY64YtEHcF2j7rJkXYBT7HHBMgN2ufKqghqcUneyYYsbHjigzQ5Yhm/zB8AXmE7ocsOKwO0AAAAASUVORK5CYII=' title='Курсив' class='bbtn'>";var U=f.document.createElement("a");U.setAttribute("class","bbtn");U.innerHTML="<img id='ubtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAdklEQVQ4y2P8//8/AzUBEwOVwaiBVAD////HwAwMDMYMDAz/odgYTUsokpwgut6hG4bvB8LA91jV4YgUBgYGhjPQgN+NpmUVVPwMNv34DBRkYGDoQIpRGH4HFRfEZiDjoC8cWHBJMDIy/iciUzDS3IWMI6+ABQDdNHFjxNx/6wAAAABJRU5ErkJggg==' title='Подчёркивание' class='bbtn'>";var Q=f.document.createElement("a");Q.setAttribute("class","bbtn");Q.innerHTML="<img id='sbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0UlEQVQ4y2P8//8/AzUBEwOVwQg0kAWf5IRp01lu3rxl+PTZUz2G/wyM4hJiV6Slpc82VFb+xqWHEVcst/dPYD96+PC6x4+feLGwsDD8/fuX4e/fvwySkpJHbGxt3OrKy76T5OWrly8H3blz14ufn/9WdEy0SHBosKKgoMDdZ8+e2dy9e9eDZC+zs7MzcHNzMzAyMQg9eHDfRUZG9mRgUJDf548fn/Dy8n4j2sspWTkFP3/+kPv86bPxqzev7Rj+/2f4+fMXAxsbG4OoiMg2QUHBXSysLCw/vv9Q5OTivDtn2tR+vC58//6d3pevX9U52DkeS4pLzPvz9y/r////OD99+qz44uULr5evXnkxMzMz8PDwnObj5WUn6OWAAP/knz9/Mt+//8D57du3uirKyvtL8vPOLluzmmXXrj3zLl26HCspKXHax8fHjpOD4ydBA2PDw/8zMDD8iU1OtTl06FCNqorqJQ4OTjdePt7PX7985Xz37h2Dto72oZS42B8kRYq3j1f3m7dvHB7cf2AzZ+7cF0xMTAw/fvxk0NLSOuLu7t5McjpkYGBgWL91K+vVK1d1nzx5Kv3z5092eXn5B4ZGBhf9PT1/k2XgaGkzMAYCAFTbwilUR+IfAAAAAElFTkSuQmCC' title='Зачёркивание' class='bbtn'>";var P=f.document.createElement("a");P.setAttribute("class","bbtn");P.innerHTML="<img id='lbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAgUlEQVQ4y+2U2wmAMAxFT8RF3KBuoBu4WVdyAx3BDTpC/KkQgviAfPZCaSiXQ5ILFVUlUh3BasAAmZQzoO4UYDH2pb55X/bAO5iFXioPvgwgqoqIXG2OwF7r6WW4td4J2GotHih2Gy/AO+/QO1MyHc4fY0imPsJ3GJ6ytM+hAf/rBAhGVoaeusxUAAAAAElFTkSuQmCC' title='Вставить ссылку...' class='bbtn'>";var K=f.document.createElement("a");K.setAttribute("class","bbtn");K.innerHTML="<img id='qbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAdUlEQVQ4y+2U0QmAMAxE37lBV3AFXcERXMEVOouzuIIr6AqOEH+KlFoKQn+EHhyBg3sQApGZUVMdldWAfwJKWiVZ8CIpzfw/V8bMsg4aAAPmqPJk2V4B2AM7cEQwB2whc7leaWUPnMCYZBcwhfk+ZnsODfhdN0SuWLeWjG7PAAAAAElFTkSuQmCC' title='Цитата' class='bbtn'>";var V=f.document.createElement("a");V.setAttribute("class","bbtn");V.innerHTML="<img id='imgbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAo0lEQVQ4y+2UsQ2DMBRE7xDTsAAzIFZKmT1AYgZkKUyQBbxDpjgaI5nIlm3iIgXXfLn4707/26Yk1FSDyvp/YOsfSD4AdIUMK+kZS5iCWQCTq8GetjDNW9JGMmpeCuwdrM+aYYa61FhSWzY1r80saQlAzSWgpJerPtRETJIznL/gC8mPb+KWM+QkXI/GUGLfBMCak3AkOdZ6y/YC49TD+z/8WTtJU0JMFaR51AAAAABJRU5ErkJggg==' title='Вставить изображение...' class='bbtn'>";var M=f.document.createElement("a");M.setAttribute("class","bbtn");M.innerHTML="<img id='ytbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEPklEQVQ4y6WU3WsUVxjGnzNnPjaT3ZlszGbJWq2EdtMkbl0qloWCe5PYxkDAO0FKoJRKbmrvQq/qH1By68e19ANEMBKiMR/qijBlURBaU2uRxLhNStidr3VmZ+bM6UW6JbW5EPrAe3He9+XHgfM8B5xztOvBgwdfVqvVLzjnuHfv3terq6sTu+dvUv86zMzMzA8MDPB6vf6Vqqr80aNHn/0vIOe879SpU7xUKvGzZ8/+HIbh+OnTp59OTU09DYJg6NKlS9/duXNn5vLly7dv3rz5zV5Aev78eeyS6zjO0IULF4avXr367cWLF89sbm7mt7a20s1ms2gYRgFA1/z8/HHOuV0ul3/AaxJebxQKheVsNotDhw4tP3v2TJucnPzx5MmTsxsbG3379+93MpnM2oEDB/5Ip9MN7KH/AFutFuWcA4DjOI7y/Pnzd2q12tuU0sjzPGaaZrZWq3VFUYQ3Avb29v6ez+frnPNfp6enp69du/bhkydP3j137tznAwMDlYWFhffDMHQLhcJPewHJ37eBaZqf2radC8Ow37btD1RVrSYSCadarZ5RVdXL5/NX6vV62TTNvmw2u62q6m+yLP/S1dW1oWna97uB0sOHDxdnZ2ePt5uiKEJRFHDO0dnZCc/z4LouNE2DLMuI4xhxHCMMQwDA6Ojo7WKxOAaAia7rfry0tHR8ZGQEyWQSAEAp5Xfv3iWEEERRhFwuh/7+fjx+/BhBEECWZXDOoSgKbNtGpVIZHRwcLCuKsixYlvUeYwwdHR28WCyiWCwiiiLYto0wDNFoNNDT04NSqQTXdWGaJgghcBwHlmWBUgrOOSzLGgQAMQiCbkopbty4QTKZDKIowvXr18mJEydQq9UwPDyMMAzhui4mJiawvr4OwzBQLpeRy+Vw//59rK2twff9DAAIQRDocRxDlmWIogjOOfr6+nDs2DH09vaiVCpBkiR4nodUKoWjR4/i8OHDGBoaQhzHGBsbQxRF8H0/BQACY0zlnIMQsvNKhCCOY1iWhVarBdM0IUkSms0mKpUKGo0GstksgiCA7/vYt28fZFlGGIYUAARK6as27HUxxtC2FaUUHR0dAADf95FOp+H7Pm7dugVCCCRJYgAgyLJsEUJ2gk0pBEGAIOz4XZIkJBIJxHEMURRBCAGlFOl0Gi9fvoRhGDh48CAopRBF0QUAIZFI1CmliOO4PYDjONB1HaVSCYIgoNVqIZVKoVwuQ1EUGIYBTdMwNTUFTdPgeR5UVf0TAERd11cppaCUYnFxEZxziKKIubk5CILwj33m5uag6zosy8L29jYWFhaQyWRgGAaSySS6u7tX20mRq9Xq8srKykfNZhOEECSTSTiOg93J2f0ZaJoG13XRdsf4+PjikSNHPgHAdmd50rbttxhjKmNMYYx1MsYk3l7YcQChlLYopa9EUWwJgtDUdf2FrutX2jt/AS41dUaC5TOOAAAAAElFTkSuQmCC' title='Вставить видео с YouTube...' class='bbtn'>";var R=f.document.createElement("a");R.setAttribute("class","bbtn");R.innerHTML="<img id='smbtn' src='data:image/png;base64,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' title='Вставить смайлик...' class='bbtn'>";var L=f.document.createElement("span");L.style.position="absolute";L.style.top="140px";L.style.left="170px";L.style.backgroundColor="#ebeff9";L.style.display="none";L.id="smfld";L.style.zIndex=1;var N,S=0,T;for(smile in O){if(S%5==0){if(N){L.appendChild(N)}N=f.document.createElement("div")}T=document.createElement("img");T.setAttribute("src","http://www.freesmileys.org/smileys/smiley-basic/"+smile+".gif");T.setAttribute("alt",smile);T.setAttribute("title",smile);N.appendChild(T);T.onclick=function(){E(A,"[img]"+this.src+"[/img]")};S++}L.appendChild(N);var I=f.document.createElement("a");I.setAttribute("class","bbtn");I.innerHTML="<img id='ppbtn' src='data:image/png;base64,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' title='Автозамена' class='bbtn'>";var F=f.document.createElement("a");F.setAttribute("class","bbtn");F.innerHTML="<img id='pvbtn' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNmlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjarY6xSsNQFEDPi6LiUCsEcXB4kygotupgxqQtRRCs1SHJ1qShSmkSXl7VfoSjWwcXd7/AyVFwUPwC/0Bx6uAQIYODCJ7p3MPlcsGo2HWnYZRhEGvVbjrS9Xw5+8QMUwDQCbPUbrUOAOIkjvjB5ysC4HnTrjsN/sZ8mCoNTIDtbpSFICpA/0KnGsQYMIN+qkHcAaY6addAPAClXu4vQCnI/Q0oKdfzQXwAZs/1fDDmADPIfQUwdXSpAWpJOlJnvVMtq5ZlSbubBJE8HmU6GmRyPw4TlSaqo6MukP8HwGK+2G46cq1qWXvr/DOu58vc3o8QgFh6LFpBOFTn3yqMnd/n4sZ4GQ5vYXpStN0ruNmAheuirVahvAX34y/Axk/96FpPYgAAACBjSFJNAAB6JQAAgIMAAPn/AACA6AAAUggAARVYAAA6lwAAF2/XWh+QAAACPElEQVR42uyUzYvNcRTGn+d8v9/fvXPvnTvXOyN5KSspkkY2srGyoCyUrJR/QUoWxH9ga2FDrFgQhZSXkrBVSImGmRovM9fc3+93vo/FGDVsLRRnc3af8zznnB5Kwp8swx+ufxAYAWB5K6AIhpyFDAAkXBz+Vvn+WtqVM7aQqCPxrDDeaSS7ZsZZAIAEEhi4MDlTg5IWAAWg7zg6U+WTgZjMwqgLXQI5Eh8AzDjUHS7CsVayi/oFGOelcq71pgb5SpU11i3sSOk66MBEM+ABgUHl2B0D36RgDz/N+oWB60CvwcME+wt2SBAurZ2Y9acClq5ox9UCe2XWynbkGQmj07WOF4E3S8+bzfh+RSeur1zbJvv+KAvLOU+UhF7DdkbDRBF4e7Qdi9XdhGa0W53EU0ORl42YAqBAvG0nnmgnO7+mm7CqE0eKwOfJ+LrXtB2S5hSKHHKhS2LaydJlyEIgkCUUiXg6P59AKSAAhAszAPouDWeh8dNyMN5e1AxjlWv3l4FfDyY0I2+UGWPNyMsp8EkgPrajnSxdexqBVzMUPw/yfc9aN9KwHQG49xMoAcn4fNlQ2FrVeePH6epFI/AugcHAtc+I8U6y46W0NxhfBuP4+HT9NmcVS1pxm5Gv5hOBkrC4lZAIRAKCWl8rnf1W61AiHtfCJpdWzr0NXxn5rsra3irsXKew08qqSheyhKlZXwgMP04VAlE51vcrP1i5truwAUAdiJfJ8HioCJdi4Puc5+z9BvyfNn8X8PsAvCEn8GkdL0gAAAAASUVORK5CYII=' title='Предпросмотр' class='bbtn'>";dspfld=f.document.createElement("div");dspfld.setAttribute("id","dspfld");dspfld.setAttribute("class","wpcpfCSS");dspfld.style.color="#000000";dspfld.style.fontSize="13px";dspfld.style.border="solid 1px Black";dspfld.style.display="none";J.appendChild(W);J.appendChild(X);J.appendChild(U);J.appendChild(Q);J.appendChild(P);J.appendChild(K);J.appendChild(V);J.appendChild(M);J.appendChild(R);J.appendChild(L);J.appendChild(I);J.appendChild(F);J.appendChild(dspfld);W=f.document.getElementById("bbtn");W.onclick=function(){l(A,"[b]","[/b]")};X=f.document.getElementById("ibtn");X.onclick=function(){l(A,"[i]","[/i]")};U=f.document.getElementById("ubtn");U.onclick=function(){l(A,"[u]","[/u]")};Q=f.document.getElementById("sbtn");Q.onclick=function(){k(A)};P=f.document.getElementById("lbtn");P.onclick=function(){if(lurl=prompt("Введите URL:","")){if(!/:\/\//.test(lurl)){lurl="http://"+lurl}l(A,"[url="+lurl+"]","[/url]")}};K=f.document.getElementById("qbtn");K.onclick=function(){l(A,"[quote]","[/quote]")};V=f.document.getElementById("imgbtn");V.onclick=function(){if(iurl=prompt("Вставьте URL изображения:","")){E(A,"[img]"+iurl+"[/img]")}};M=f.document.getElementById("ytbtn");M.onclick=function(){if(yturl=prompt("Вставьте URL видео:","")){E(A,"[youtube]"+yturl+"[/youtube]")}};R=f.document.getElementById("smbtn");R.onclick=function(){var Y=document.getElementById("smfld");Y.style.display=Y.style.display=="none"?"inline-block":"none"};L=f.document.getElementById("smfld");I=f.document.getElementById("ppbtn");I.onclick=function(){m(A,O)};F=f.document.getElementById("pvbtn");F.onclick=function(){q(A.value)};A.onmouseover=null}function b(F,G){var H=JSON.parse(localStorage.getItem("tv_hide_panels"));if(H==null){H={}}H[F]=G;localStorage.setItem("tv_hide_panels",JSON.stringify(H))}function y(F){try{return JSON.parse(localStorage.getItem("tv_hide_panels"))[F]}catch(G){return null}}function n(){if(B("tv_hide_vip_style")){try{var G=f.document.getElementsByClassName("wpcpaCSS");for(i=0;i<G.length;i++){G[i].getElementsByTagName("a")[0].setAttribute("style","font-size: 12px; vertical-align: top !important;")}}catch(F){console.log(F)}}}function o(){g(f.document.getElementsByClassName("wpcppCSS"));g([f.document.body]);u(".wpcpvbCSS{width:44px;height:50px;background:transparent;margin-bottom:4px;transition: background ease 0.5s;}.wpcpvbCSS:hover{background:#ebeff9};")}function d(H){u("#cli{height:auto !important;width:300px !important;} #contacts:hover .vfh_notifications{display:block;}");H=H.getElementsByTagName("td")[1];var I=document.createElement("div");I.setAttribute("class","vfh_item");I.id="contacts";var G=document.createElement("a");G.style.cursor="pointer";G.id="online_num";G.innerHTML="Загрузка...";var F=document.createElement("div");F.setAttribute("class","vfh_notifications");F.id="cli";I.appendChild(G);I.appendChild(F);H.insertBefore(I,H.getElementsByTagName("span")[0]);f.loadContacts();f.setInterval(function(){f.loadContacts();var J=document.getElementById("cli");var N=J.getElementsByTagName("span"),L=[],K=[];for(var M=0;M<N.length;M++){L.push(N[M].innerHTML)}for(M=0;M<L.length;M++){if(L[M]=="В сети  "){K.push(L[M])}}document.getElementById("online_num").innerHTML=K.length+"/"+L.length+" в сети"},2000)}function g(F){var G,H;for(i=0;i<F.length;i++){G=F[i].getElementsByClassName("wciuasCSS")[0];if(G){H=G.src;G.parentNode.parentNode.removeChild(G.parentNode);F[i].getElementsByClassName("wrpthbCSS")[0].style.backgroundImage="url("+H+")"}F[i].getElementsByClassName("wrpthbCSS")[0].style.backgroundSize="cover"}}function e(){if(B("tv_bb_editor")){z(f.document.getElementById("wavdi"),0)}}function s(){if(B("tv_thread_avatar")){u("a:hover .wciuasCSS { width:auto; height:auto; position:absolute; z-index:150; }")}if(B("tv_bb_editor")){try{f.document.getElementById("wpiprdi").onmouseover=function(){z(this,0)}}catch(F){}try{f.document.getElementById("wpiprdi").onmouseover=function(){z(this,0)}}catch(F){}}if(B("tv_avatars_to_left")){o()}n()}function C(){n();if(B("tv_thread_avatar")){u("a:hover .wciuasCSS { width:auto; height:auto; position:absolute; z-index:150; } a .wciuasCSS { transition: width 1s !important; }")}if(B("tv_avatars_to_left")){o()}if(B("tv_bb_editor")){f.document.getElementById("wpiprdi").onmouseover=function(){z(this,0)};var F=f.document.getElementsByName("pfid");for(i=0;i<=F.length;i++){f.document.getElementById("cbcfid_"+F[i].value).onmouseover=function(){z(this,0)}}}if(B("tv_avatars_to_left")){o()}}function c(){if(B("tv_bb_editor")){f.document.getElementById("wavdi").onmouseover=function(){z(this,0)}}}function x(){if(B("tv_bb_editor")){z(f.document.getElementById("wavdi"),2)}}function h(){if(B("tv_bb_editor")){z(f.document.getElementById("wpiprdi"),2)}}function a(){if(B("tv_bb_editor")){try{z(f.document.getElementById("wcvdi"),0)}catch(F){console.log(F)}try{z(f.document.getElementById("wpiprdi"),0)}catch(F){console.log(F)}}if(B("tv_hide_vip_style")){try{var I=f.document.getElementsByClassName("wvantCSS")[1];I.getElementsByTagName("span")[1].setAttribute("style","");I=f.document.getElementsByClassName("wuvunmCSS")[0];I.getElementsByTagName("span")[0].setAttribute("style","");var G=I.getElementsByTagName("font")[0];if(G){G.parentNode.removeChild(G)}I=f.document.getElementsByClassName("wpmopCSS")[0];I.getElementsByTagName("a")[0].setAttribute("style","")}catch(F){console.log(F)}}n();if(B("tv_repair_profile_html")){var H=f.document.getElementsByClassName("wuitCSS")[1];H=H.getElementsByTagName("td")[1];H.innerHTML=H.textContent}}function j(){if(B("tv_bb_editor")){z(f.document.getElementById("wavdi"),0)}}function p(){var G=f.document.getElementById("vfh");G=G.getElementsByTagName("*")[0];G=G.getElementsByTagName("*")[0];G=G.getElementsByTagName("*")[0];var L=f.document.createElement("td");L.innerHTML="<img class='vfh_item' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAAIGNIUk0AAHolAACAgwAA+f8AAIDoAABSCAABFVgAADqXAAAXb9daH5AAAAT7SURBVHjaZNRJbFsFHsfx73vPz37x0vglTtImKUmaZUjTluCZpAlqKaUoUttDi4TEckAjcUQccuYyp9FohMRhxGXggDghIdCA1CGXClUDRSXqQrok7hZqY8f2c7y9xX47J8IM87v/P/pd/j9hdXWVXxONRpFlGVEUSSaTw/tS+87IoryALww4YQhiqIWhu24Y+mXDMEpBEOC6Lo7j7BkRfhff98n0Z86nYqm3d7XdU1pLi3dEi5QSIAQpYrFBK9OvXpFl+YNqtXrp9/d7YBiGAMnxg+P/KBVKf15rrGGMGnSO2mijRf4ijTPTHCTf2IjfftB3VhAPnx0ZHfu4kN9+JwxDQxAEAKTl5WXCMEQQhNT4wbGvbt658fKX41+xeXGTqcgUL9w7RUPRaTxWiV8d4uRxk1NZnZZZZKsQzA8PTSy3240vwhBHEASkbDaL4zhMjD/14Wbu3sVvF6/wbPoo87f/SEtskdnOMGNPk+70ojXaiG6czjWdo+ou/fJPXH4cmZgYnRypViv/CoIAaW5uDlXdd7bblf7+6ecz+NpFBu6OMSJpzARzpNQUuCGyIJHM9KLpHo/yj5nJ3efIRA9PbjcpKEPPxGPyD61W62FEEIT9fX3x1Uv/Dgi6zzJj3qFvuog6MIjeNmn5LWqaBoFDTBbpmiUudO6zXpDY+qzF68U277V/IHbmxVVxd/emGI/3rNh253mtup9Dkz8zO/8dsdg2QSjSaDYolkqYlkWpXObWnXu8GtygN+/xN3+Gh5pAIhHwh1KRlmE835NIrEQURTreajmxVmuYen2E/v4plpZ0tre3MQwDXdcp7ewgdjq8e6jCbL7NG9YRnn7uMA+2PEJbI9vU+VHTYmI6fTwCQcayFCxL5qWXPiIWa6BpQ7iuS7Vaxfd9zl94mbmIwZlr/+SVXJoHvTq5tTWmRY9yTw3f7aVtWKTT6Yzouh6RSJcwlLh79zkcZxDHMcnn8xQKBbLZLGPD+zH3z/DXzCt8HwQMJRP8aXGRTLSH8eQwYkTB9lw81yWi691aMpnk8OHPMM0xgsAjCEI0TcNxHJ48yXPs2DMIgsCGVgXPp1bbxQ9DLN3kVUNixzKYUmK4plmL7OxUrs3O9r2VSt2KqWqOSsXhxo0KEOK5IVev/odypYBrw4OHOSBgt1anWq0AUACQJI6rqv3T9vY1SVGUiqqqWYhMlst1arVdbNum2/FYeavB9IKJLZU4tLhDUnU4/ZpPx/LRCr/979EjRxgYGPhmc3PzPdGyrPLGxsb7o6OjNJtNms0m3a5Np9Ph6UWHQ8cCDozBiQsw+BTMLYeMTP7XGEQiLC4usrGx8b5pmmXR933K5fLXuVzuk/n5eQzDwDQMut0Oph5gtiGRhmoRHBuiCrj2b+C5c+coFouflEqlr33fRzhw4AAAruumFhYWvoxGo6fX1tawbZuD0xGmZjMggNORsMwuTtDg/q0AMYixsrKC53nfrK+vX5BlWQeQUqkUAKIoOo8ePfq8p6dneGlpaT4ajVL52WVq5AQJaZKRgWPgqGzdbDE5McXJkycoFosfX79+/U1FUfbma68hgOM4mKZJIpE4Pzs7+3ZfX98pz/PirusCIMsysixbtVrtytbW1gemaV5KJBJEo9E94/9A13WxLIswDIf7+/vPqKq6oCjKQBiG2Lat1ev19Xq9flkQhFI8HkeW5f8BfxkA+0CAVvtMYt8AAAAASUVORK5CYII=' title='Настройки Turbo VIOIS'>";G.appendChild(L);L.onclick=function(){w()};u("@keyframes appear1{0%{opacity:0;}100%{opacity:0.7;}}");u("@keyframes appear2{0%{top:-20%;opacity:0;}100%{top:20%;opacity:1;}}");if(B("tv_contact_list")){d(G)}if(B("tv_hide_vip_style")){var I=f.document.getElementsByTagName("head")[0];I.removeChild(I.getElementsByTagName("style")[0]);try{var M=f.document.getElementById("csuid1");M=M.getElementsByTagName("tr");for(i=1;i<M.length;i++){M[i].getElementsByTagName("td")[3].getElementsByTagName("a")[0].setAttribute("style","font-size: 12px;")}}catch(K){console.log(K)}try{var M=f.document.getElementById("csuid1");M=M.getElementsByTagName("tr");for(i=1;i<M.length;i++){M[i].getElementsByTagName("td")[1].getElementsByTagName("a")[0].setAttribute("style","font-size: 12px;")}}catch(K){console.log(K)}}mppnls=f.document.getElementsByClassName("wmcCSS");var J=f.document.createElement("span");var F=f.document.createElement("img");F.setAttribute("src","/styles/images/archive_event.gif");F.style.display="inline";F.style.width="16px";F.style.height="16px";F.setAttribute("title","Скрыть");F.style.cursor="pointer";J.appendChild(F);var H=f.document.createElement("div");H.style.textAlign="right";H.style.position="absolute";H.style.top="0.5em";H.style.right="0.5em";H.appendChild(J);for(i=0;i<mppnls.length;i++){try{mppnls[i].style.position="relative";mppnls[i].appendChild(H.cloneNode(true));mppnls[i].getElementsByTagName("div")[0].getElementsByTagName("span")[0].onclick=function(){b(this.parentNode.parentNode.getElementsByTagName("span")[0].innerHTML,"hide");this.parentNode.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode.parentNode)};if(y(mppnls[i].getElementsByTagName("span")[0].innerHTML)=="hide"){mppnls[i].parentNode.parentNode.removeChild(mppnls[i].parentNode);i--}}catch(K){console.log(K)}}if(/viois\.ru\/ask/.test(window.location.href)){e()}if(/viois\.ru\/thread/.test(window.location.href)){s()}if(/viois\.ru\/blog/.test(window.location.href)){C()}if(/viois\.ru\/newblog/.test(window.location.href)){c()}if(/viois\.ru\/support/.test(window.location.href)){x()}if(/viois\.ru\/ticket/.test(window.location.href)){h()}if(/viois\.ru\/user/.test(window.location.href)){a()}if(/viois\.ru\/update/.test(window.location.href)){j()}}p()})();